---
import ListingsPostForm from "../../components/ListingsPostForm.astro";
import Nav from "../../components/utils/Nav.astro";
import "/src/styles/global.css"; // Importar estilos globales
import { getAllZonesServer } from "../../../lib/zones-crud-server.js"; // Importamos la función para obtener zonas

// Preparamos la config en la PÁGINA
const firebaseConfig = {
    apiKey: import.meta.env.PUBLIC_FIREBASE_API_KEY,
    authDomain: import.meta.env.PUBLIC_FIREBASE_AUTH_DOMAIN,
    projectId: import.meta.env.PUBLIC_FIREBASE_PROJECT_ID,
    appId: import.meta.env.PUBLIC_FIREBASE_APP_ID,
};

// Obtenemos la lista de zonas desde el servidor
const zones = await getAllZonesServer();
---

<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Crear Nuevo Post</title>
        <style>
            /* Estilos básicos para la página, o importar CSS global */
        </style>
    </head>
    <body>
        <Nav currentPage="listings" />

        <ListingsPostForm firebaseConfig={firebaseConfig} zones={zones} />
    </body>
</html>
